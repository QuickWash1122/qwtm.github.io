<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>車種サイズ検索</title>
    <style>
        /* CSS: スタイルは変更なし（元のコードと同一） */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header-bar {
            width: 100%;
            height: 60px; 
            background-color: #ffcc00; 
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            /* 画像を背景として中央に配置する設定 */
            /* quickwash_logo_top 2.png がこのHTMLファイルと同じ場所にないと表示されません。 */
            background-image: url('quickwash_logo_top 2.png'); 
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .h-logo {
            width: 100%;
            height: 60px;
            text-align: center;
        }

        .h-logo-img {
            height: 70%;
            padding: 10px;
        }
        
        .container {
            width: 95%;
            max-width: 600px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            flex-grow: 1; 
            box-sizing: border-box;
        }
        h1 {
            text-align: center;
            color: #cc9900;
            margin-bottom: 25px;
            font-size: 1.6em;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #ffcc00;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1.1em;
        }

        #count-display {
            text-align: left;
            margin-bottom: 10px;
            color: #cc9900;
            font-weight: bold;
        }
        
        /* 検索結果の表示エリア */
        .result-item {
            display: grid;
            grid-template-columns: 2fr 60px 1fr; /* 情報エリア、サイズ、ボタンの3列 */
            gap: 10px;
            align-items: center;
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            background-color: #fff;
        }
        
        /* 車両情報（メーカー＋車種）のコンテナ */
        .car-info-container {
            min-width: 0; /* flex/gridの子要素として溢れを防ぐ */
        }

        /* メーカー名（上段、小さく薄い色） */
        .car-maker {
            font-size: 0.8em;
            color: #888;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: block; /* 常に一行を占める */
        }
        
        /* 車種名（下段、大きく太字） */
        .car-name {
            font-weight: bold;
            color: #444;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: block; /* 常に一行を占める */
            font-size: 1em;
            line-height: 1.2;
        }
        /* /検索結果の表示エリア */

        .result-size {
            font-size: 1.2em;
            font-weight: 900;
            padding: 4px 0;
            border-radius: 4px;
            text-align: center;
        }
        
        .size-s { background-color: #e6f7ff; color: #007bff; }
        .size-m { background-color: #fffbe6; color: #ff9800; }
        .size-l { background-color: #e6ffe6; color: #4caf50; }
        .size-ll { background-color: #ffe6e6; color: #f44336; }
        .size-xl { background-color: #f3e6ff; color: #9c27b0; }
        
        .price-button {
            padding: 8px;
            background-color: #ffaa00; 
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9em;
            transition: background-color 0.2s;
            white-space: nowrap;
        }
        .price-button:hover {
            background-color: #cc9900;
        }

        .modal {
            display: none; 
            position: fixed; 
            z-index: 101; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; 
            background-color: rgba(0,0,0,0.6); 
        }
        .modal-content {
            background-color: #fff;
            margin: 10% auto; 
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        .modal-content h2 {
            color: #ffaa00;
            text-align: center;
            border-bottom: 2px solid #ffcc00;
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }
        .price-table div {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
            font-size: 1em;
        }
        .price-table strong {
            color: #333;
        }
        .price-table span {
            color: #f44336;
            font-weight: bold;
        }
        .service-group {
            margin-top: 15px;
            padding-top: 5px;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>

<div class="header-bar">
    <div class="h-logo"><img src="images/logo.png" alt="logo" class="h-logo-img"></div>
</div>

<div class="container">
    <h1>車種サイズ検索</h1>
    <input type="text" id="carNameInput" placeholder="車種名またはメーカー名を入力してください（例：アルファード、トヨタ）" onkeyup="searchCarSize()">
    <div id="count-display"></div>
    <div id="result">
        <div id="result-placeholder">入力された車種・メーカーに該当するサイズと価格が表示されます。</div>
    </div>
</div>

<div id="priceModal" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="closeModal()">&times;</span>
        <h2 id="modalTitle"></h2>
        <p><strong>車種サイズ: </strong><span id="modalSize"></span></p>
        <div id="priceTable" class="price-table">
        </div>
    </div>
</div>

<script>
    // 💡 JavaScript部分: データと関数（searchCarSize、openModalを修正）

    // 車種サイズデータ (元のコードから変更なし)
    const carDataByMaker = {
        "レクサス": {"CT": "M", "ES": "L", "GS": "L", "GX": "XL", "HS": "L", "IS": "M", "LBX": "M", "LC": "L", "LFA": "L", "LM": "XL", "LS": "LL", "LX": "XL", "NX": "L", "RC": "M", "RX": "LL", "RZ": "LL", "SC": "M", "UX": "M"},
        "トヨタ": {"アイシス": "L", "アクア": "S", "アベンシス": "M", "アリオン": "M", "アリスト": "L", "アルテッツァ": "M", "アルファード": "XL", "アレックス": "M", "イプサム": "L", "ウィッシュ": "L", "ウィンダム": "L", "エスクァイア": "LL", "エスティマ": "LL", "オリジン": "M", "オーパ": "M", "オーリス": "M", "カムリ": "L", "カリーナ": "M", "カルディナ": "M", "カレン": "M", "カローラ": "M", "カローラ II": "S", "カローラ アクシオ": "M", "カローラ クロス": "L", "カローラ スパシオ": "M", "カローラ スポーツ": "M", "カローラ ツーリング": "M", "カローラ フィールダー": "M", "カローラ ランクス": "M", "カローラ レビン": "M", "ガイア": "L", "キャバリエ": "M", "キャミ": "M", "クラウン": "L", "クラウン エステート": "LL", "クラウン クロスオーバー": "LL", "クラウン マジェスタ": "L", "クラシック": "L", "クルーガー": "LL", "クレスタ": "M", "グランエース": "XL", "グランドハイエース": "XL", "グランビア": "XL", "サイノス": "M", "サクシード": "M", "シエンタ": "M", "スターレット": "S", "スパーキー": "M", "スプリンター": "M", "スプリンター トレノ": "M", "スペイド": "M", "スープラ": "M", "セラ": "M", "セリカ": "M", "セルシオ": "L", "センチュリー": "LL", "センチュリー (SUV)": "XL", "ソアラ": "M", "タウンエース": "LL", "タンク": "M", "ターセル": "S", "チェイサー": "M", "デュエット": "S", "ノア": "LL", "ハイエース": "XL", "ハイラックス": "XL", "ハイラックスサーフ": "LL", "ハリアー": "LL", "パッソ": "S", "パッソセッテ": "M", "ピクシス (各シリーズ)": "S", "ファンカーゴ": "M", "プレイド": "M", "ブレビス": "M", "プラッツ": "M", "プリウス": "M", "プリウスα": "L", "プリウスPHV": "M", "プレミオ": "M", "プログレ": "M", "プロナード": "M", "プロボックス": "M", "ベルタ": "M", "ポルテ": "M", "マークII": "M", "マークX": "M", "マークXジオ": "L", "ヤリス": "S", "ヤリスクロス": "M", "ライズ": "M", "ライトエース": "LL", "ラウム": "M", "ラクティス": "M", "ラッシュ": "M", "ランドクルーザー": "XL", "ルーミー": "M", "レジアス": "XL", "ヴァンガード": "LL", "ヴィッツ": "S", "ヴェルファイア": "XL", "ヴェロッサ": "M", "ヴォクシー": "LL", "ヴォルツ": "M", "86": "M", "bB": "M", "bZ4X": "L", "C-HR": "L", "FJクルーザー": "XL", "GRヤリス": "S", "GR86": "M", "iQ": "S", "ist": "M", "MIRAI": "L", "MR-2": "M", "MR-S": "M", "RAV4": "LL", "SAI": "L", "WiLL サイファ": "M", "WiLL Vi": "M", "WiLL VS": "M"},
        "日産": {"アベニール": "M", "アリア": "L", "インフィニティ Q": "L", "ウイングロード": "M", "エキスパート": "M", "エクストレイル": "LL", "エルグランド": "XL", "オッティ": "S", "キックス (2020年~)": "L", "キックス (~2012)": "S", "キャラバン": "XL", "キューブ": "M", "クリッパー": "S", "クルー": "M", "グロリア": "M", "サクラ": "S", "サニー": "M", "サファリ": "XL", "シルビア": "M", "シルフィ": "M", "シーマ": "L", "ジューク": "M", "スカイライン": "M", "スカイライン クロスオーバー": "L", "ステージア": "M", "セドリック": "M", "セフィーロ": "M", "セレナ": "LL", "ティアナ": "M", "ティーダ": "M", "ティーノ": "M", "テラノ": "LL", "デイズ": "S", "デイズルークス": "S", "デュアリス": "L", "ノート": "M", "ノートオーラ": "M", "バサラ": "LL", "バネット": "LL", "パオ": "S", "パルサー": "M", "ピノ": "S", "フィガロ": "M", "フェアレディZ": "M", "フーガ": "L", "ブルーバード": "M", "プリメーラ": "M", "プレサージュ": "LL", "プレジデント": "L", "プレセア": "M", "ホーミー": "XL", "マイクラC+C": "S", "マーチ": "S", "ムラーノ": "LL", "モコ": "S", "ラシーン": "M", "ラティオ": "M", "ラフェスタ": "L", "ラルゴ": "LL", "リバティ": "L", "リーフ": "M", "ルークス": "S", "レパード": "M", "ローレル": "M", "180SX": "M", "AD": "M", "Be-1": "M", "e-NV200": "LL", "GT-R": "L", "NT100クリッパー": "S", "NV100クリッパー": "S", "NV200バネット": "LL", "NV350キャラバン": "XL"},
        "ホンダ": {"アクティ": "S", "アコード": "M", "アヴァンシア": "M", "インサイト": "M", "インスパイア": "M", "インテグラ": "M", "エアウェイブ": "M", "エディックス": "L", "エリシオン": "LL", "エレメント": "LL", "オデッセイ": "LL", "オルティア": "M", "キャパ": "M", "クラリティ": "L", "クロスロード": "L", "グレイス": "M", "ザッツ": "S", "シティ": "S", "シビック": "M", "シャトル": "M", "ジェイド": "M", "ステップワゴン": "LL", "ストリート": "S", "ストリーム": "L", "セイバー": "M", "ゼスト": "S", "トゥデイ": "S", "トルネオ": "M", "バモス": "S", "パートナー": "M", "ビート": "S", "フィット": "S", "フィット クロスター": "M", "フィットシャトル": "M", "フリード": "L", "プレリュード": "M", "ホライゾン": "LL", "モビリオ": "M", "ライフ": "S", "ラグレイト": "LL", "レジェンド": "L", "ロゴ": "S", "ヴェゼル": "L", "CR-V": "LL", "CR-X": "S", "CR-Z": "S", "Honda e": "S", "HR-V": "L", "MDX": "XL", "N-BOX": "S", "N-BOX+": "S", "N-BOX/": "S", "N-ONE": "S", "N-VAN": "S", "N-WGN": "S", "NSX": "L", "S-MX": "M", "S2000": "M", "S660": "S", "WR-V": "L", "Z": "S", "ZR-V": "L"},
        "マツダ": {"アクセラ": "M", "アテンザ": "M", "キャロル": "S", "サバンナRX-7": "M", "スクラム": "S", "スピアーノ": "S", "センティア": "M", "デミオ": "S", "トリビュート": "LL", "ビアンテ": "LL", "ファミリア": "M", "フレア": "S", "フレアクロスオーバー": "S", "フレアワゴン": "S", "プレマシー": "L", "ベリーサ": "S", "ボンゴ": "XL", "ミレーニア": "M", "ユーノスコスモ": "L", "ラピュタ": "S", "ランティス": "M", "ルーチェ": "M", "ロードスター": "S", "AZ-ワゴン": "S", "AZ-1": "S", "AZ-3": "M", "CX-3": "M", "CX-30": "M", "CX-5": "L", "CX-60": "LL", "CX-7": "LL", "CX-8": "LL", "CX-80": "LL", "MAZDA2": "S", "MAZDA3": "M", "MAZDA6": "M", "MPV": "LL", "MX-30": "M", "RX-7": "M", "RX-8": "M"},
        "スバル": {"アルシオーネ": "L", "アルシオーネSVX": "L", "インプレッサ": "M", "インプレッサ スポーツ": "M", "インプレッサ G4": "M", "インプレッサ STI": "M", "インプレッサ XV": "L", "エクシーガ": "LL", "エクシーガ クロスオーバー7": "LL", "クロストレック": "L", "サンバー": "S", "シフォン": "S", "ジャスティ": "M", "ステラ": "S", "ソルテラ": "L", "ディアスワゴン": "S", "デックス": "M", "トラヴィック": "LL", "トレジア": "M", "ドミンゴ": "S", "フォレスター": "LL", "プレオ": "S", "ルクラ": "S", "レイバック": "L", "レガシィ アウトバック": "L", "レガシィ ツーリングワゴン": "M", "レガシィ ランカスター": "L", "レガシィB4": "M", "レックス": "M", "レックス(軽自動車)": "S", "レヴォーグ": "M", "ヴィヴィオ": "S", "BRZ": "M", "R1": "S", "R2": "S", "S210": "L", "WRX": "M", "XV": "L"},
        "三菱": {"アイ": "S", "アウトランダー": "LL", "エクリプス": "M", "エクリプス クロス": "LL", "エクリプス スパイダー": "M", "ギャラン": "M", "ギャラン フォルティス": "M", "グランディス": "LL", "コルト": "S", "コルトプラス": "M", "シャリオ": "LL", "シャリオ グランディス": "LL", "ジープ": "LL", "スタリオン": "M", "タウンボックス": "S", "チャレンジャー": "LL", "ディアマンテ": "L", "ディオン": "L", "ディグニティ": "L", "デボネア": "L", "デリカスペースギア": "XL", "デリカバン": "XL", "デリカミニ": "S", "デリカD:2": "M", "デリカD:3": "LL", "デリカD:5": "XL", "トッポ": "S", "トライトン": "XL", "パジェロイオ": "L", "パジェロジュニア": "M", "パジェロミニ": "S", "パジェロ(ショート)": "LL", "パジェロ(ロング)": "XL", "ブラボー": "S", "プラウディア": "L", "ミニカ": "S", "ミニキャブ": "S", "ミラージュ": "S", "ミラージュ アスティ": "M", "ミラージュ ディンゴ": "M", "ランサー": "M", "ランサー エボリューション": "M", "ランサーカーゴ": "M", "ランサーセディア": "M", "リベロ": "M", "レグナム": "M", "eKアクティブ": "S", "eKカスタム": "S", "eKクロス": "S", "eKスペース": "S", "eKスポーツ": "S", "eKワゴン": "S", "FTO": "M", "GTO": "M", "RVR": "L"},
        "スズキ": {"アルト": "S", "アルト ラパン": "S", "アルトワークス": "S", "イグニス": "S", "エスクード": "L", "エリオ": "M", "エヴリィ": "S", "カプチーノ": "S", "カルタス": "S", "カルタス クレセント": "M", "キザシ": "M", "キャラ": "S", "キャリー": "S", "クロスビー": "M", "グランドエスクード": "LL", "ジムニー": "S", "ジムニーシエラ": "M", "ジムニーノマド": "M", "スイフト": "S", "スプラッシュ": "S", "スペーシア": "S", "スペーシアベース": "S", "セルボ": "S", "ソリオ": "M", "ツイン": "S", "ハスラー": "S", "バレーノ": "S", "パレット": "S", "フロンクス": "M", "マイティボーイ": "S", "ランディ": "LL", "ワゴンR": "S", "ワゴンRスマイル": "S", "ワゴンRソリオ": "M", "Kei": "S", "MRワゴン": "S", "SX4": "M", "X-90": "S"},
        "ダイハツ": {"アトレー": "S", "アトレー7": "M", "アルティス": "L", "ウェイク": "S", "エッセ": "S", "オプティ": "S", "キャスト": "S", "クー": "M", "グランマックス": "LL", "コペン": "S", "ストーリア": "S", "ソニカ": "S", "タフト": "S", "タント": "S", "タント エグゼ": "S", "テリオス": "S", "テリオスキッド": "S", "トール": "M", "ネイキッド": "S", "ハイゼット": "S", "ビーゴ": "M", "ブーン": "S", "ブーンルミナス": "M", "ミゼットII": "S", "ミラ": "S", "ミライース": "S", "ミラココア": "S", "ミラジーノ": "S", "ミラトコット": "S", "ムーヴ": "S", "ムーヴ キャンバス": "S", "ムーヴコンテ": "S", "ムーヴラテ": "S", "メビウス": "L", "ロッキー": "M", "MAX": "S", "YRV": "M"},
        "光岡自動車": {"オロチ": "L", "ガリュー": "L", "ガリューIII": "L", "ガリュー クラシック": "M", "ガリュー リムジン": "L", "ガリュー 204": "M", "ガリュー コンバーチブル": "L", "ヌエラ 6-02": "M", "バディ": "LL", "ヒミコ": "M", "ビュート": "M", "ライク": "S", "リューギ": "M", "ロックスター": "M", "M55": "M"},
        "メルセデス・ベンツ": {"バネオ": "L", "ビアノ": "XL", "ミディアムクラス": "M", "190クラス": "M", "Aクラス": "M", "Bクラス": "M", "Cクラス": "M", "CLクラス": "L", "CLAクラス": "M", "CLEクラス": "L", "CLKクラス": "M", "CLSクラス": "L", "Eクラス": "L", "EQA": "L", "EQB": "L", "EQC": "L", "EQEセダン": "L", "EQG": "XL", "EQS SUV": "XL", "EQSセダン": "LL", "Gクラス": "XL", "GLクラス": "XL", "GLAクラス": "M", "GLBクラス": "L", "GLCクラス": "L", "GLEクラス": "LL", "GLKクラス": "L", "GLSクラス": "XL", "Mクラス": "LL", "Rクラス": "LL", "Sクラス": "LL", "SLクラス": "L", "SLCクラス": "M", "SLKクラス": "M", "SLRクラス": "L", "Vクラス": "XL", 
            "AMG Aクラス": "M", /* 🌟 修正済み: AMC -> AMG */
            "AMG Cクラス": "M", "AMG CLAクラス": "M", "AMG CLEクラス": "L", "AMG CLSクラス": "L", "AMG Eクラス": "L"},
        "メルセデスAMG/マイバッハ": {"AMG EQEセダン": "L", "AMG EQSセダン": "LL", "AMG Gクラス": "XL", "AMG GLクラス": "XL", "AMG GLAクラス": "M", "AMG GLBクラス": "L", "AMG GLCクラス": "L", "AMG GLEクラス": "LL", "AMG GLSクラス": "XL", "AMG GT": "L", "AMG GT 4ドアクーペ": "L", "AMG Mクラス": "LL", "AMG Sクラス": "LL", "AMG SLクラス": "L", "AMG SLCクラス": "M", "マイバッハ GLS": "XL", "マイバッハ Sクラス": "LL", "マイバッハ ５７": "XL", "マイバッハ ６２": "XL"},
        "スマート": {"フォーツーカブリオ": "S", "フォーツークーペ": "S", "フォーフォー": "S", "ロードスター": "S", "Ｋ": "S"},
        "BMW": {"１シリーズ": "M", "２シリーズ": "M", "３シリーズ": "M", "４シリーズ": "M", "５シリーズ": "L", "５シリーズ GT": "L", "６シリーズ": "L", "７シリーズ": "LL", "８シリーズ": "LL", "ｉ３": "M", "ｉ４": "L", "ｉ８": "L", "ｉＸ": "LL", "ｉＸ３": "LL", "Ｘ１": "L", "Ｘ２": "L", "Ｘ３": "LL", "Ｘ４": "LL", "Ｘ５": "XL", "Ｘ６": "XL", "Ｘ７": "XL", "ＸＭ": "XL", "Ｚ３": "M", "Ｚ４": "M"},
        "アウディ": {"オールロード クワトロ": "L", "Ａ１（Ｓ１）": "M", "Ａ３（Ｓ３, ＲＳ３）": "M", "Ａ４（Ｓ４，ＲＳ４）": "M", "Ａ５ アバント": "L", "Ａ５（Ｓ５，ＲＳ５）": "M", "Ａ６（Ｓ６，ＲＳ６）": "L", "Ａ７（Ｓ７，ＲＳ７）": "L", "Ａ８（Ｓ８）": "LL", "ｅ－ｔｒｏｎ": "LL", "ｅ－ｔｒｏｎ スポーツバック": "LL", "ｅ－ｔｒｏｎ ＧＴクワトロ": "LL", "Ｑ２": "M", "Ｑ３（ＲＳ Ｑ３）": "L", "Ｑ４ ｅ－ｔｒｏｎ": "L", "Ｑ５（Ｓ Ｑ５）": "LL", "Ｑ６ ｅ－ｔｒｏｎ": "LL", "Ｑ７": "XL", "Ｑ８": "XL", "Ｒ８": "L", "Ｓ５ アバント": "L", "ＳＱ６ ｅ－ｔｒｏｎ": "LL", "ＴＴ": "M"},
        "フォルクスワーゲン": {"アルテオン": "L", "イオス": "M", "カルマンギア": "S", "クロスゴルフ": "M", "クロストゥーラン": "L", "クロスポロ": "M", "コラード": "M", "ゴルフ": "M", "ゴルフ オールトラック": "M", "ゴルフ トゥーラン": "L", "ゴルフ ヴァリアント": "M", "ザ・ビートル": "M", "シャラン": "LL", "シロッコ": "M", "ジェッタ": "M", "タイプⅠ": "M", "タイプⅡ": "LL", "タイプⅢ": "M", "ティグアン": "L", "トゥアレグ": "XL", "ニュービートル": "M", "パサート": "M", "フォルクスワーゲン ＣＣ": "M", "ボーラ": "M", "ポロ": "M", "ルポ": "S", "ヴァナゴン": "XL", "ヴェント": "M", "ｃｒｏｓｓ ｕｐ！": "S", "ＩＤ．４": "LL", "ＩＤ：Ｂｕｚｚ": "XL", "Ｔ－Ｃｒｏｓｓ": "M", "Ｔ－Ｒｏｃ": "L", "Ｔ５": "XL", "ｕｐ！": "S"},
        "オペル": {"アストラ": "M", "ザフィーラ": "M", "シグナム": "L", "スピードスター": "S", "ベクトラ": "M", "ヴィータ": "S"},
        "ポルシェ": {"カイエン": "XL", "カレラ ＧＴ": "L", "ケイマン": "M", "タイカン": "LL", "パナメーラ": "LL", "ボクスター": "M", "マカン": "LL", "３５６": "M", "７１８ケイマン": "M", "７１８スパイダー": "M", "７１８ボクスター": "M", "９１１": "M", "９２８": "M", "９６８": "M"},
        "ミニ": {"エースマン": "M", "カントリーマン": "L", "クラブマン": "M", "クロスオーバー": "M", "クーペ": "S", "コンバーチブル": "S", "ペースマン": "M", "ロードスター": "S", "３ドア": "S", "５ドア": "M"},
        "キャデラック": {"エスカレード": "XL", "エルドラド": "L", "コンコース": "L", "セビル": "L", "デ・ビル": "L", "ドゥビル": "L", "フリートウッド": "L", "ブロアム": "L", "リムジン": "L", "リリック": "LL", "ＡＴＳ": "M", "ＣＴ４": "M", "ＣＴ５": "L", "ＣＴ６": "L", "ＣＴＳ": "L", "ＤＴＳ": "L", "ＳＲＸ": "LL", "ＳＴＳ": "L", "ＸＬＲ": "M", "ＸＴ４": "L", "ＸＴ５": "LL", "ＸＴ６": "XL", "ＸＴＳ": "LL"},
        "シボレー": {"アストロ": "XL", "アバランチ": "XL", "インパラ": "L", "エクスプレス": "XL", "オプトラ": "L", "カマロ": "L", "キャプティバ": "LL", "クルーズ": "M", "コルベット": "L", "サバーバン": "XL", "シルバラード": "XL", "ソニック": "M", "タホ": "XL", "トラバース": "XL", "トレイルブレイザー": "LL", "ノヴァ": "L", "ブレイザー": "LL", "Ｃ１５００": "XL", "ＨＨＲ": "M", "ＭＷ": "M", "Ｓ－１０ブレイザー": "L"},
        "ポンテアック": {"トランザム": "L"},
        "ハマー": {"Ｈ２": "XL", "Ｈ３": "XL"},
        "GMC": {"ＧＭＣ サバーバン": "XL", "シエラ": "XL", "ユーコン": "XL"},
        "フォード": {"エクスカージョン": "XL", "エクスプローラー": "XL", "エクスペディション": "XL", "エコスポーツ": "L", "エコノライン": "LL", "エスケープ": "LL", "エスコート": "M", "クーガ": "LL", "サンダーバード": "L", "フィエスタ": "M", "フォーカス": "M", "ブロンコ": "XL", "マスタング": "L", "Ｆ－１５０": "XL"},
        "リンカーン": {"コンチネンタル": "L", "タウンカー": "LL", "ナビゲーター": "XL", "ＭＫＸ": "L"},
        "クライスラー": {"イプシロン": "M", "クロスファイア": "M", "セブリング": "M", "３００": "L", "３００Ｃ": "L", "３００Ｍ": "L", "ＰＴクルーザー": "M"},
        "ダッジ": {"キャリバー": "L", "チャレンジャー": "LL", "チャージャー": "L", "デュランゴ": "XL", "ナイトロ": "LL", "バイパー": "L", "バン": "XL", "マグナム": "L", "ラム": "XL"},
        "ジープ": {"グラディエーター": "XL", "グランドチェロキー": "XL", "コマンダー": "XL", "コンパス": "LL", "チェロキー": "LL", "パトリオット": "L", "ラングラー": "LL", "レネゲード": "L"},
        "DMC": {"１２デロリアン": "L"},
        "テスラ": {"モデル３": "M", "モデルＳ": "L", "モデルＸ": "LL", "モデルＹ": "LL"},
        "米国インフィニティ/トヨタ/ホンダ": {"ＦＸ": "LL", "Ｑ５０": "M", "Ｑ６０": "M", "ＱＸ": "XL", "カムリ ソラーラ": "L", "シエナ": "XL", "セコイア": "XL", "タコマ": "XL", "タンドラ": "XL", "４ランナー": "XL", "リッジライン": "XL"},
        "ロールスロイス": {"カリナン": "XL", "ゴースト": "LL", "スペクター": "XL", "ドーン": "LL", "ファントム": "XL", "レイス": "LL"},
        "ベントレー": {"アルナージ": "LL", "コンチネンタル": "L", "フライングスパー": "LL", "ベンテイガ": "XL", "ミュルザンヌ": "LL"},
        "ジャガー": {"Ｅペイス": "L", "Ｆタイプ": "M", "Ｆペイス": "LL", "Ｉペイス": "LL", "Ｓタイプ": "L", "Ｘタイプ": "L", "ＸＥ": "M", "ＸＦ": "L", "ＸＪ": "L", "ＸＫ": "L"},
        "デイムラー": {"デイムラー": "L"},
        "ランドローバー": {"ディスカバリー": "XL", "ディスカバリー スポーツ": "LL", "ディフェンダー": "XL", "フリーランダー": "LL", "レンジローバー": "XL", "レンジローバー イヴォーク": "LL", "レンジローバー スポーツ": "LL", "レンジローバー ヴェラール": "LL", "レンジローバー ヴォーグ": "XL"},
        "アストンマーティン": {"シグネット": "M", "ラピード": "LL", "ヴァンキッシュ": "LL", "ヴァンテージ": "LL", "ヴィラージュ": "LL", "ＤＢ１１": "LL", "ＤＢ７": "LL", "ＤＢ９": "LL", "ＤＢＳ": "LL", "ＤＢＸ": "XL", "Ｖ１２ヴァンキッシュ": "LL", "Ｖ１２ヴァンテージ": "LL", "Ｖ８": "LL"},
        "ロータス": {"エキシージ": "M", "エスプリ": "M", "エミーラ": "L", "エラン": "M", "エリーゼ": "M", "エレトレ": "XL", "エヴォーラ": "L", "ヨーロッパ": "M"},
        "マクラーレン": {"アルトゥーラ": "LL", "５４０Ｃ": "LL", "５７０ＧＴ": "LL", "５７０Ｓ": "LL", "６００ＬＴ": "LL", "６５０Ｓ": "LL", "６７５ＬＴ": "LL", "７２０Ｓ": "LL", "７５０Ｓ": "LL", "７６５ＬＴ": "LL", "ＧＴ": "LL", "ＭＰ４－１２Ｃ": "LL"},
        "TVR": {"タスカン": "M"},
        "ローバー/オースチン/モーリス": {"ミニ": "S"},
        "ボルボ": {"２４０": "M", "７４０": "M", "８５０": "M", "９４０": "M", "９６０": "M", "Ｃ３０": "M", "Ｃ４０": "M", "Ｃ７０": "M", "ＥＸ３０": "L", "Ｐ１８００": "M", "Ｓ４０": "M", "Ｓ６０": "M", "Ｓ７０": "M", "Ｓ８０": "M", "Ｓ９０": "L", "Ｖ４０": "M", "Ｖ５０": "M", "Ｖ６０": "L", "Ｖ７０": "L", "Ｖ９０": "L", "ＸＣ４０": "L", "ＸＣ６０": "LL", "ＸＣ７０": "LL", "ＸＣ９０": "XL"},
        "サーブ": {"９－３": "M", "９－５": "M", "９００": "M", "９０００": "M"},
        "プジョー": {"リフター": "LL", "１００７": "M", "１０６": "M", "２００８": "L", "２０６": "M", "２０６ＣＣ": "M", "２０６ＳＷ": "M", "２０７": "M", "２０７ＣＣ": "M", "２０７ＳＷ": "M", "２０８": "M", "３００８": "LL", "３０６": "M", "３０７": "M", "３０７ＣＣ": "M", "３０７ＳＷ": "M", "３０８": "M", "３０８ＣＣ": "M", "３０８ＳＷ": "M", "４０６": "M", "４０７": "M", "４０７ＳＷ": "M", "４０８": "M", "５００８": "LL", "５０８": "M", "５０８ＳＷ": "M", "６０７": "M", "ｅ－２０８": "M", "ＲＣＺ": "M", "ＳＵＶ ２００８": "L", "ＳＵＶ ｅ－２００８": "L"},
        "ルノー": {"アルカナ": "L", "アヴァンタイム": "L", "ウインド": "M", "カジャー": "L", "カングー": "LL", "キャプチャー": "M", "グランセニック": "L", "コレオス": "LL", "セニックＲＸ－４": "L", "トゥインゴ": "S", "メガーヌ": "M", "ルーテシア": "M"},
        "シトロエン": {"グランドＣ４スペースツアラー": "LL", "グランドＣ４ピカソ": "LL", "ベルランゴ": "LL", "Ｃ２": "M", "Ｃ３": "M", "Ｃ３エアクロス": "L", "Ｃ４": "M", "Ｃ４カクタス": "M", "Ｃ４クーペ": "M", "Ｃ４ピカソ": "L", "Ｃ５": "M", "Ｃ５エアクロスＳＵＶ": "LL", "Ｃ５Ｘ": "L", "Ｃ６": "M", "ＤＳ３": "M", "ＤＳ４": "M", "ＤＳ５": "M"},
        "DSオートモビル": {"ＤＳ３クロスバック": "M", "ＤＳ７クロスバック": "LL", "ＤＳ９": "L"},
        "フィアット": {"グランデプント": "M", "ドブロ": "LL", "バルケッタ": "M", "パンダ": "S", "プント": "S", "ムルティプラ": "L", "５００": "S", "５００Ｃ": "S", "５００Ｌ": "S", "５００Ｘ": "M", "６００": "M"},
        "アバルト": {"グランデプント": "S", "プント": "S", "プントエヴォ": "S", "１２４スパイダー": "S", "５００": "S", "５００Ｃ": "S", "５９５": "S", "５９５Ｃ": "S", "６９５": "S"},
        "アルファロメオ": {"アルファスパイダー": "M", "アルファブレラ": "M", "アルファ１４７": "M", "アルファ１５６": "M", "アルファ１５９": "M", "アルファ１６６": "M", "アルファＧＴ": "M", "アルファＧＴＶ": "M", "ジュニア": "M", "ジュリア": "M", "ジュリエッタ": "M", "ステルヴィオ": "LL", "トナーレ": "LL", "ミト": "M", "４Ｃ": "M", "８Ｃ": "L"},
        "フェラーリ": {"カリフォルニア": "LL", "テスタロッサ": "LL", "プロサングエ": "XL", "ポルトフィーノ": "LL", "ローマ": "LL", "２９６ＧＴＢ": "LL", "２９６ＧＴＳ": "LL", "３０８": "M", "３２８": "LL", "３４８": "LL", "３６０": "LL", "３６０スパイダー": "LL", "４３０スクーデリア": "LL", "４５６": "LL", "４５８": "LL", "４５８スパイダー": "LL", "４８８": "LL", "４８８スパイダー": "LL", "５１２": "LL", "５５０マラネロ": "LL", "５９９": "LL", "６１２": "LL", "８１２": "LL", "Ｆ１２": "LL", "Ｆ３５５": "LL", "Ｆ４０": "LL", "Ｆ４３０": "LL", "Ｆ４３０スパイダー": "LL", "Ｆ５０": "LL", "Ｆ８スパイダー": "LL", "Ｆ８トリブート": "LL", "ＦＦ": "LL", "ＧＴＣ４ルッソ": "LL", "ＳＦ９０ストラダーレ": "LL"},
        "ランボルギーニ": {"アヴェンタドール": "LL", "ウラカン": "LL", "ウルス": "XL", "カウンタック": "LL", "ガヤルド": "LL", "ディアブロ": "LL", "ムルシエラゴ": "LL", "レヴエルト": "LL"},
        "マセラティ": {"ギブリ": "L", "クアトロポルテ": "LL", "クーペ": "L", "グランカブリオ": "L", "グラントゥーリズモ": "L", "グレカーレ": "LL", "レヴァンテ": "XL", "３２００ＧＴ": "L", "ＭＣ２０": "LL"},
        "ランチア": {"イプシロン": "M", "デルタ": "M"},
        "オールズモビル": {"オーロラ": "L"},
        "アルピーヌ": {"Ａ１１０": "M"},
        "BYD": {"シーライオン７": "LL", "ＡＴＴＯ ３": "LL", "ＤＯＬＰＨＩＮ": "M", "ＳＥＡＬ": "L"},
        "ヒョンデ": {"インスタ―": "M", "コナ": "L", "ＩＯＮＩＱ５": "LL", "ＮＥＸＯ": "LL"},
        "ダラーラ": {"ストラダーレ": "LL"},
        "米国インフィニティ": {}, "北米トヨタ": {}, "北米ホンダ": {}, 
    };

    // 価格データ (元のコードから変更なし)
    const priceData = {
        "ミスト洗車": { S: 1900, M: 3000, L: 3600, LL: 4000, XL: 5200 },
        "撥水ワックスコート洗車": { S: 2600, M: 3600, L: 4200, LL: 4700, XL: 5900 },
        "撥水ポリマーコート洗車": { S: 9000, M: 10000, L: 11000, LL: 12000, XL: 13000 },
        "ガラスコート１面": { S: 1000, M: 1000, L: 1000, LL: 1000, XL: 1000 },
        "ガラスコート全面": { S: 2000, M: 2000, L: 3000, LL: 3000, XL: 3000 }, 
        "虫取り": { S: 500, M: 500, L: 500, LL: 500, XL: 500 },
        "車内清掃": { S: 1800, M: 2300, L: 2800, LL: 3300, XL: 3800 },
        "除菌＆消臭(車内)": { S: 2200, M: 2200, L: 2200, LL: 3300, XL: 3300 },
    };
    
    /**
     * 検索ロジック関数 (元のコードから変更なし)
     */
    function searchCarSize() {
        const inputElement = document.getElementById('carNameInput');
        const resultElement = document.getElementById('result');
        const countDisplay = document.getElementById('count-display');
        
        const rawInput = inputElement.value.trim();
        
        if (rawInput === "") {
            resultElement.innerHTML = `<div id="result-placeholder">入力された車種・メーカーに該当するサイズと価格が表示されます。</div>`;
            countDisplay.textContent = "";
            return;
        }

        const normalizedInput = rawInput.replace(/[　\s\(\)・,.:\-!~]/g, '').toLowerCase();
        const matchingCars = [];

        for (const maker in carDataByMaker) {
            const normalizedMaker = maker.replace(/[　\s\(\)・,.:\-!~]/g, '').toLowerCase();
            const cars = carDataByMaker[maker];
            
            if (normalizedMaker.includes(normalizedInput)) {
                for (const carName in cars) {
                    matchingCars.push({maker: maker, name: carName, size: cars[carName]});
                }
            }
            
            for (const carName in cars) {
                const normalizedCarName = carName.replace(/[　\s\(\)・,.:\-!~]/g, '').toLowerCase();
                
                if (normalizedCarName.includes(normalizedInput)) {
                    const isDuplicate = matchingCars.some(item => item.maker === maker && item.name === carName);
                    if (!isDuplicate) {
                         matchingCars.push({maker: maker, name: carName, size: cars[carName]});
                    }
                }
            }
        }

        if (matchingCars.length === 0) {
            resultElement.innerHTML = `<div id="result-placeholder">「${rawInput}」に該当する車種は見つかりませんでした。</div>`;
            countDisplay.textContent = "";
        } else {
            // 重複排除とソート（メーカー名 > 車種名）
            const uniqueCars = Array.from(new Set(matchingCars.map(car => `${car.maker}#${car.name}#${car.size}`)))
                .map(s => {
                    const [maker, name, size] = s.split('#');
                    return { maker, name, size };
                });
                
            uniqueCars.sort((a, b) => {
                const makerCompare = a.maker.localeCompare(b.maker, 'ja');
                if (makerCompare !== 0) return makerCompare;
                return a.name.localeCompare(b.name, 'ja');
            });
            
            let html = '';
            uniqueCars.forEach(car => {
                const fullCarName = `${car.maker} ${car.name}`;
                // HTML構造: メーカー名と車種名を2段表示する構造を反映
                html += `
                    <div class="result-item">
                        <div class="car-info-container">
                            <span class="car-maker">${car.maker}</span>
                            <span class="car-name">${car.name}</span>
                        </div>
                        <span class="result-size size-${car.size.toLowerCase()}">${car.size}</span>
                        <button class="price-button" onclick="openModal('${fullCarName.replace(/'/g, "\\'")}', '${car.size}')">価格を確認</button>
                    </div>
                `;
            });
            
            resultElement.innerHTML = html;
            countDisplay.textContent = `該当件数: ${uniqueCars.length}件`;
        }
    }

    /**
     * 価格モーダルを開く関数 (💡 価格表示バグ修正済み)
     */
    function openModal(carName, size) {
        document.getElementById('modalTitle').textContent = carName;
        document.getElementById('modalSize').textContent = size;
        const priceTableElement = document.getElementById('priceTable');
        
        // サービス名と、対応する priceDataのキーを正確にマッピング
        const services = [
            { label: "ミスト洗車", key: "ミスト洗車" },
            { label: "撥水ワックスコート洗車", key: "撥水ワックスコート洗車" },
            { label: "撥水ポリマーコート洗車", key: "撥水ポリマーコート洗車" }
        ];

        const options = [
            // 表示名と priceDataのキーが異なっても正しくアクセスできるように記述
            { label: "ガラスコート 1面", key: "ガラスコート１面" }, // キーは全角１
            { label: "ガラスコート 全面", key: "ガラスコート全面" },
            { label: "虫取り", key: "虫取り" },
            { label: "車内清掃", key: "車内清掃" },
            { label: "除菌＆消臭 (車内)", key: "除菌＆消臭(車内)" }
        ];

        let html = '';

        // 基本サービス
        services.forEach((service, index) => {
            const price = priceData[service.key] ? priceData[service.key][size] : undefined;
            
            // 価格が存在するか確認し、存在する場合は日本円形式で整形
            if (price !== undefined) {
                // 堅牢な日本円形式の整形処理
                const priceFormatted = price.toLocaleString('ja-JP', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0 });
                
                // 最初のサービスにのみ service-group クラスを適用
                const groupClass = (index === 0) ? 'service-group' : '';
                html += `<div class="${groupClass}"><strong>${service.label}</strong><span>${priceFormatted}</span></div>`;
            } else {
                html += `<div><strong>${service.label}</strong><span>価格データなし</span></div>`;
            }
        });
        
        // オプションサービス
        html += `<div class="service-group"><strong>--- オプション ---</strong></div>`;
        options.forEach(option => {
            const price = priceData[option.key] ? priceData[option.key][size] : undefined;
            
            if (price !== undefined) {
                // 堅牢な日本円形式の整形処理
                const priceFormatted = price.toLocaleString('ja-JP', { style: 'currency', currency: 'JPY', minimumFractionDigits: 0 });
                html += `<div><strong>${option.label}</strong><span>${priceFormatted}</span></div>`;
            } else {
                html += `<div><strong>${option.label}</strong><span>価格データなし</span></div>`;
            }
        });

        priceTableElement.innerHTML = html;
        document.getElementById('priceModal').style.display = 'block';
    }

    /**
     * モーダルを閉じる関数 (元のコードから変更なし)
     */
    function closeModal() {
        document.getElementById('priceModal').style.display = 'none';
    }

    // モーダル外クリックで閉じる処理 (元のコードから変更なし)
    window.onclick = function(event) {
        const modal = document.getElementById('priceModal');
        if (event.target == modal) {
            closeModal();
        }
    }
</script>

</body>
</html>